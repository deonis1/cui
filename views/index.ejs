<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="css/bootstrap.min.css?v=<%= version %>" />
  <link rel="stylesheet" href="css/index.css?v=<%= version %>" />
  <link rel="stylesheet" href="css/fontawesome/css/all.min.css?v=<%= version %>" />

  <link rel="apple-touch-icon" sizes="180x180" href="img/favicon_io/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="img/favicon_io/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="img/favicon_io/favicon-16x16.png">
  <link rel="manifest" href="/site.webmanifest">
  <script type="text/javascript" src="/js/socket.io.js"></script>
  <link rel="stylesheet" href="/css/default.min.css">
  <script src="/js/highlight.min.js"></script>
  <script src="/js/markdown-it.min.js"></script>
  <script type="text/javascript" src="js/webui.js?v=<%= version %>"></script>
  <!-- <script>hljs.highlightAll()</script> -->
  <title><%= title %></title>
</head>
<style>



</style>

<body>
  <nav class="navbar navbar-expand-lg navbar-dark theme justify-content-between flex-nowrap flex-row">
    <div class="footerbar nav navbar-nav flex-row float-right">
    <button id="sidebar-toggle" class="btn theme sidebar-toggle float-left"> <i class="fas fa-bars theme"></i> </button> 
</div>
    <div class="footerbar nav navbar-nav flex-row float-right">
      <button class="btn theme" onclick="window.location.href='/logout'" title = "Log Out" type="button"><i class="fa fa-sign-out-alt"></i></button></div>
  </nav>
  <div class="container-fluid">
    <div class="row">
      <!-- Left Sidebar -->
      <div class="col-md-3 rightsidebar left-sidebar theme" id="left-sidebar">
        <div class="toolbar">
          <button title="New Chart" onclick ="cui.onNewChart()" style="width:220px" class="btn theme"> <i class="fas fa-file"></i></button>
          <button title="Delete All" onclick ="cui.deleteMessages()" type="button" class="btn theme"><i class="fas fa-trash"></i></button>
      </div>
      <div class="sidebar">
        <div id="accordion">
           <!-- CARD One -->
           <button type="button" class="btn collapsible">Chats</button>
           <div class="content">
                <ul class="list-group" id ="savedChats"></ul>
            </div>
         
          <!-- <button type="button" class="btn collapsible">Data Channels</button>
           <div class="content">
                <ul class="list-group" id ="databases">
               
                </ul>
            </div> -->
          </div>
        </div>
      
    </div>

      <!-- Main Chat Container -->
      <div class="col-md-9 chat-container">
        <div class="chat-messages" id="chatMessages"></div>
        <div class="stopper" id ="stop">
        <button id="stopgenerator" onclick="cui.stopGenerating()" type="button" class="btn btn-outline-secondary">Stop generating</button></div>
        <div class="input-container">
          <div class="embed">
          <input class="embed-check" id="embed" type="checkbox" name="embedding" value="">
          <span  class="embed-icon" title="Enable Database Search" > <i class="fas fa-server theme"></i></span>
        </div>

          <textarea id="messageInput" tabindex="0" rows="1" placeholder="Ask a question" class="form-control"></textarea>
          <button style="width:65px;" id="sendMessage" type="button" class="btn theme">Send</button>
        </div>
      </div>

    <script>
      let iphostname =<%- JSON.stringify(hostname) %>;
      let port = <%- JSON.stringify(port) %>;
      let datachanels = <%- JSON.stringify(datachannel) %>;
      console.log(datachanels);
      cui.init(iphostname, port, datachanels);
      const sidebarToggle = document.getElementById('sidebar-toggle');
      const leftSidebar = document.getElementById('left-sidebar');
      const chatContainer = document.querySelector('.chat-container');

      sidebarToggle.addEventListener('click', () => {
        leftSidebar.classList.toggle('open');
        chatContainer.classList.toggle('open');
      });
  </script>
</body>
</html>
